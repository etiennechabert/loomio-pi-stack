# Loomio Pi Stack - Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# BASIC CONFIGURATION
# =============================================================================

# Your domain name (e.g., loomio.example.com)
CANONICAL_HOST=loomio.example.com

# Support email address
SUPPORT_EMAIL=support@example.com

# Helper bot email (for automated messages)
HELPER_BOT_EMAIL=noreply@example.com

# =============================================================================
# ADMIN USER (Optional - Auto-create on first startup)
# =============================================================================

# Automatically create an admin user on first startup
# These will be auto-generated during 'make setup'
# - Email: admin@loomio.local (auto-set)
# - Password: randomly generated (displayed after setup)
# Leave blank to create admin manually via web interface
LOOMIO_ADMIN_EMAIL=
LOOMIO_ADMIN_PASSWORD=
LOOMIO_ADMIN_NAME=Admin User

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

POSTGRES_DB=loomio_production
POSTGRES_USER=loomio
POSTGRES_PASSWORD=change-this-secure-password

# =============================================================================
# SECRET KEYS
# =============================================================================

# Generate with: openssl rand -hex 64
SECRET_KEY_BASE=generate-with-openssl-rand-hex-64

# Generate with: openssl rand -hex 32
LOOMIO_HMAC_KEY=generate-with-openssl-rand-hex-32

# For signed URLs (e.g., file uploads)
# Generate with: openssl rand -hex 32
DEVISE_SECRET=generate-with-openssl-rand-hex-32

# =============================================================================
# EMAIL / SMTP CONFIGURATION
# =============================================================================

# SMTP Server Settings
SMTP_DOMAIN=example.com
SMTP_SERVER=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=your-smtp-username
SMTP_PASSWORD=your-smtp-password
SMTP_AUTH=plain
SMTP_USE_TLS=true

# Email sender details
REPLY_HOSTNAME=loomio.example.com
FROM_EMAIL=noreply@example.com

# =============================================================================
# PORTS CONFIGURATION
# =============================================================================

LOOMIO_PORT=3000
CHANNELS_PORT=5000
HOCUSPOCUS_PORT=4000
ADMINER_PORT=8081
NETDATA_PORT=19999

# =============================================================================
# INCOMING EMAIL (Reply-by-Email - Optional)
# =============================================================================
# Token to authenticate incoming email webhook requests
# Only needed if using Cloudflare Email Worker for reply-by-email
# Generate with: openssl rand -hex 32
# IMPORTANT: This must match EMAIL_PROCESSOR_TOKEN in .env.email-worker
# EMAIL_PROCESSOR_TOKEN=

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Encryption key for backups (generate with: openssl rand -hex 32)
BACKUP_ENCRYPTION_KEY=generate-with-openssl-rand-hex-32

# Backup schedule (cron format: "minute hour day month weekday")
# Default: every hour at minute 0
BACKUP_SCHEDULE=0 * * * *

# Number of days to retain backups
BACKUP_RETENTION_DAYS=30

# Google Drive Integration (optional)
GDRIVE_ENABLED=false
# OAuth2 token from rclone (see OAUTH2_SETUP.md for setup instructions)
GDRIVE_TOKEN='{"access_token":"YOUR_ACCESS_TOKEN","token_type":"Bearer","refresh_token":"YOUR_REFRESH_TOKEN","expiry":"2024-01-01T00:00:00Z"}'
GDRIVE_FOLDER_ID=

# =============================================================================
# MONITORING (Netdata Cloud - Optional)
# =============================================================================

# Get these from https://app.netdata.cloud
NETDATA_CLAIM_TOKEN=
NETDATA_CLAIM_ROOMS=

# =============================================================================
# AUTO-UPDATE CONFIGURATION (Watchtower)
# =============================================================================

# Schedule for automatic updates (cron format: "second minute hour day month weekday")
# Default: 3:15 AM daily
WATCHTOWER_SCHEDULE=0 15 3 * * *

# Notification URL (optional - supports many services via shoutrrr)
# Examples:
# - Slack: slack://token@channel
# - Email: smtp://username:password@host:port/?from=fromAddress&to=recipient
# - Discord: discord://token@webhookid
WATCHTOWER_NOTIFICATIONS=
WATCHTOWER_NOTIFICATION_URL=

# =============================================================================
# CLOUDFLARE TUNNEL (Optional - for secure external access)
# =============================================================================

# Get token from: https://one.dash.cloudflare.com/
CLOUDFLARE_TUNNEL_TOKEN=

# =============================================================================
# THEME AND CUSTOMIZATION (Optional)
# =============================================================================

# Custom theme color (hex code without #)
# THEME_PRIMARY_COLOR=4caf50

# Custom logo URL
# THEME_LOGO_URL=

# Custom app name
# THEME_APP_NAME=Our Community

# =============================================================================
# FEATURES (Optional)
# =============================================================================

# Feature toggles
# Disable public groups and threads (set to 'true' for private community - requires login)
FEATURES_DISABLE_PUBLIC_THREADS=true

# Disable email/password login (useful when using SSO only)
# FEATURES_DISABLE_EMAIL_LOGIN=false

# Disable user help system
# FEATURES_DISABLE_HELP=false

# =============================================================================
# LANGUAGE & TRANSLATION (Optional)
# =============================================================================

# Note: Loomio supports 40+ languages including English and German!
# Users can select their preferred language from their profile.
# The interface auto-detects browser language on first visit.

# Supported languages include:
# en (English), de (German), fr (French), es (Spanish), it (Italian),
# pt (Portuguese), nl (Dutch), pl (Polish), ru (Russian), ja (Japanese),
# zh (Chinese), and many more!

# Content Translation (powered by Google Translate)
# Users see a "translate" button on content in other languages
# Translations happen on-demand when users click the button

# Google Translate API (optional - for content translation)
# Get API key: https://console.cloud.google.com/apis/credentials
# GOOGLE_TRANSLATE_API_KEY=

# DeepL API (alternative to Google Translate - higher quality)
# Get API key: https://www.deepl.com/pro-api
# DEEPL_API_KEY=

# Default locale for server-side operations
# LOCALE=en

# =============================================================================
# LIMITS & QUOTAS (Optional)
# =============================================================================

# Maximum upload size in MB
MAX_THREADS=4
MAX_MESSAGE_LENGTH=
PENDING_INVITATIONS_COUNT_CACHE=1000

# Maximum attachments per post
# MAX_ATTACHMENTS=10

# File upload size limit (MB)
# MAX_ATTACHMENT_SIZE=10

# =============================================================================
# PERFORMANCE TUNING (Advanced)
# =============================================================================

# Puma web server settings
PUMA_WORKERS=2
RAILS_MAX_THREADS=5

# Sidekiq background jobs
SIDEKIQ_CONCURRENCY=5

# =============================================================================
# DEVELOPMENT/DEBUGGING (Do not enable in production)
# =============================================================================

# RAILS_LOG_LEVEL=info
# DEBUG=false
